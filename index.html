<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="style.css">

    <title>Document</title>
</head>
<body>

    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            <h1 class="display-12">Weather Dashboard</h1>
        </div>
      </div>


    <div class = "container buttonsgroup">


    <div class="row" id="cities">
        
        <div class="col-4 searchcolumn">
     <!-- search input box -->
            <Div class="inputarea" id="search">
             <input type="text" id = "city-input" placeholder="Type city">

    <!-- search button -->
                <input type="submit" class="searchadd" id="searchbtn" Value="Search">
                
            </Div>
    <!-- this is the place where previous search gets saved -->
            <div class="savedcities" id="save-btns"> </div>

        </div>

<!-- Weather results--------------------------------------------- -->
        <!--==================================  -->

<div class="col-8" id="resultdisplay">
    
    <div id="Weatherreport"></div>

<div class="container">
    <div class="forecast">forecast</div>
</div>
        <!-- end of weather result screen -->
    </div>
    </div>
    <!-- ======================================================= -->

<!-- Getting API======================== -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">

    $(document).ready(function(){

      // here, we are creating buttons
        
        var weatherScreen =$("div#Weatherreport");
        var savebtnsDiv = $("div#save-btns");
        var citiesarr = ["Washington DC", "New York", "Boston"]

        var renderLast = function(){
        savebtnsDiv.html("");
        $.each(citiesarr, function(idx, city){
            var btn = $("<button>");
            btn.text(city);
            btn.attr("id", "choices")
            btn.addClass("nav-link")
            savebtnsDiv.append(btn);
           
        })
        
        }  

        var displayWeather = function(weatherObj) {
            var date = weatherObj.dt;
            var img1 = weatherObj.weather.icon;
            var temp = weatherObj.main.temp;
            var humidity = weatherObj.main.humidity
            var weatherDiv = $("<div>");

            var h3 = $("<h3>");
            var img =$("<img>");
            img.attr("src", img1);
            h3.text(date);
            var p1 = $("<p>");
            p1.text("Temperature:" + temp);
            var p2 = $("<p>");
            p2.text("Humidity: " +humidity);

            weatherDiv.append(h3);
            weatherDiv.append(img)
            weatherDiv.append(p1);
            weatherDiv.append(p2);
            weatherScreen.prepend(weatherDiv);
            

        }




// =======================ajax not working yet

var weatherLookUp = function(city){
            var queryURL ="http://api.openweathermap.org/data/2.5/weather/";
        $.ajax({
          url: queryURL,
          method: "GET",
          data:{
            q: city,
            APPID: "9d9098e8b8edb39b819bbf8955b080a6" 
          }
        }).then(function(response) {
            console.log(response)
        //   $("#Weatherreport").text(JSON.stringify(response));
          displayWeather(response);
          
        });
      }
      
// =========================================
// Search Button=================================
        $("#searchbtn").on("click", function(event){
            event.preventDefault();
            var city = $("#city-input").val();
            citiesarr.push(city);
            renderLast();   
            weatherLookUp(city);
        });

        renderLast();
});

</script>
</body>
</html>